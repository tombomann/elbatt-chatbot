name: Auto-generate Documentation
on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  generate-docs:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Generate README
        run: |
          cat > README.md << 'EOF'
          # elbatt-chatbot
          
          ## ðŸ¤– Beskrivelse
          En avansert chatbot for elbatt.no med integrasjon mot Vegvesen, Varta og OpenAI.
          
          ## ðŸ—ï¸ Arkitektur
          - **Backend**: FastAPI (Python)
          - **Frontend**: Moderne webapplikasjon  
          - **Deploy**: Docker + GitHub Actions + Scaleway
          
          ## ðŸš€ Lokal utvikling
          \`\`\`bash
          docker-compose up --build
          \`\`\`
          
          ## ðŸ“¡ API Endepunkter
          - \`POST /api/chat\` - Hovedchat-endepunkt
          - \`POST /api/vegvesen\` - Direkte Vegvesen-oppslag
          - \`POST /api/varta\` - Varta-produktsÃ¸k
          - \`GET /api/health\` - Health check
          
          ## ðŸ”§ Teknologi
          - Python, FastAPI, Docker
          - OpenAI GPT, Vegvesen API, Varta
          - GitHub Actions, Scaleway
          
          ## ðŸ“„ Lisens
          MIT
          EOF
          
      - name: Commit README
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add README.md
          git diff --staged --quiet || git commit -m "docs: auto-generate README"
          git push
